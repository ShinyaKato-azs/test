<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>e-sports診断フローチャート</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="bootstrap.css">
    <script src="app.js" defer></script>
    <!---PWA用のmanifestファイル-->
    <link rel="manifest" href="./manifest.json">
</head>
<body class="text-center">
    <h2>e-sports診断フローチャート</h2>
    <div>
        <button id="restart-button" class="btn btn-primary">はじめからやり直す</button>
    </div>
    <div id="container">
        <div id="question-container">
            <span id="question">質問</span>
        </div>
        <div id="answer-buttons">
            <button id=option1 class="btn btn-primary" onclick="answerQuestion(1);pageTransition()">はい</button>
            <button id=option2 class="btn btn-primary" onclick="answerQuestion(2);pageTransition()">いいえ</button>
        </div>
    </div>
    <div>
        <button id="back-button" class="btn btn-primary" onclick="backToPreviousQuestion();pageTransition()">一つ前に戻る</button>
    </div>
    <div>
        <button id="admin-button" class="btn btn-primary" onclick="requirePassword()">管理者用ページ</button>
    </div>

<script>

//管理者用画面への遷移制御
function requirePassword(){
     password=prompt("パスワードを入力してください","");
     if ( password == "Syokai123@" ){
         location.href="answersInformation.html";
     }
     else if(password == null){
        
     }
     else{
        alert( "パスワードが違います" );
     }
}

 //フェードイン
function fadeIn(){

const keyframes ={
opacity:["0","1"]
}
const timing ={
fill:"forwards" ,
duration:800
}

// アニメーションを加える要素を指定
document.body.animate(keyframes,timing);

}
fadeIn();

//PWA化のためのswを読み込み
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('./sw.js').then(registration => {
      console.log('ServiceWorker registration successful.');
    }).catch(err => {
      console.log('ServiceWorker registration failed.');
    });
  }

/*******　jsonファイルの読み込み ********/
//非同期処理で実行
window.onload = async function fetchData(){
//awaitを用いて処理を順序付ける
const response = await fetch("questions.json");
const questionJsonData = await response.json();
const textData = JSON.stringify(questionJsonData);
console.log('asyncを使いました');
console.log(textData);
const question1 = questionJsonData.Question1;
console.log(question1);
console.log(question1.number);
console.log(question1.sentence);
}
let questions = await questionJsonData;
console.log("データの確認です");
console.log(questionJsonData);
</script>
</body>
</html>